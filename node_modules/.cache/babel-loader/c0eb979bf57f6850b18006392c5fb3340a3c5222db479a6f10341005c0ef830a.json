{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ILHAME/OneDrive/Documents/GitHub/tech_bible_react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ILHAME/OneDrive/Documents/GitHub/tech_bible_react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ILHAME/OneDrive/Documents/GitHub/tech_bible_react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import{CategoriesData}from\"../../dataJson/CategoriesData\";// import axios from \"axios\";\nimport{BASE_URL}from\"../../config/mongo\";import{useNavigate}from\"react-router-dom\";import{AuthContext}from\"../../context/AuthContext\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NewDiscussion(){var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(\"Cybersecurity\"),_useState6=_slicedToArray(_useState5,2),category=_useState6[0],setCategory=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),userId=_useState8[0],setUserID=_useState8[1];//const axios = require(\"axios\");\n// async function checkMoralImplications(inputText) {\n//   const apiKey = \"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\";\n//   const apiUrl =\n//     \"https://api.openai.com/v1/engines/davinci-codex/completions\";\n//   try {\n//     const response = await axios.post(\n//       apiUrl,\n//       {\n//         prompt: `Is the following text morally acceptable? \"${inputText}\"`,\n//         max_tokens: 1,\n//       },\n//       {\n//         headers: {\n//           Authorization: `Bearer ${apiKey}`,\n//           \"Content-Type\": \"application/json\",\n//         },\n//       }\n//     );\n//     const completion = response.data.choices[0].text.trim();\n//     return completion === \"Yes\";\n//   } catch (error) {\n//     console.error(\"Error:\", error);\n//     return null;\n//   }\n// }\nuseEffect(function(){setUserID(currentUser===null||currentUser===void 0?void 0:currentUser.uid);},[currentUser]);var createDiscussion=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var parentId,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:parentId=null;_context.next=3;return axios.post(\"\".concat(BASE_URL,\"/create-discussion\"),{userId:userId,title:title,description:description,category:category,parentId:parentId});case 3:response=_context.sent;window.location.reload();// Handle successful response\nconsole.log(\"Discussion Created successfully:\",response.data);navigate(\"/community\");case 7:case\"end\":return _context.stop();}},_callee);}));return function createDiscussion(){return _ref.apply(this,arguments);};}();var navigate=useNavigate();var handleCreateDiscussion=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();if(!(!title||!description||!category||!userId)){_context2.next=5;break;}console.error(\"Missing required fields\");console.log(title,description,category,userId);return _context2.abrupt(\"return\");case 5:try{console.log(title,description,category,userId);// const inputText = { description };\n// checkMoralImplications(inputText).then((result) => {\n//   if (result === null) {\n//     alert(\"The result is null.\");\n//   } else if (result) {\n//     console.log(\"The text is morally acceptable.\");\ncreateDiscussion();//   } else {\n//     alert(\"The text is morally unacceptable.\");\n//   }\n// });\n// You can perform additional actions here, such as displaying a success message or redirecting to another page\n}catch(error){// Handle error\nconsole.error(\"Error creating discussion:\",error);}case 6:case\"end\":return _context2.stop();}},_callee2);}));return function handleCreateDiscussion(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full px-[10%] py-[5%] bg-[#1C1C1C] rounded shadow-md w-[90%] mt-4 \",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-white text-center mb-4\",children:\"Create New Discussion\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateDiscussion,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",className:\"block text-gray-300 text-sm font-bold mb-2\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"Title\",className:\"w-full px-3 py-2 border rounded bg-white text-black focus:outline-none focus:border-blue-500\",value:title,onChange:function onChange(e){return setTitle(e.target.value);},placeholder:\"Write a title\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"block text-gray-300 text-sm font-bold mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"Description\",rows:\"3\",className:\"w-full px-3 py-2 border rounded bg-white text-black focus:outline-none focus:border-blue-500\",placeholder:\"Write a Description...\",value:description,onChange:function onChange(e){return setDescription(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Category\",className:\"block text-gray-300 text-sm font-bold mb-2\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"bg-white text-black rounded-md\",name:\"Category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{disabled:true,selected:true,children:\"- Select a Category -\"}),CategoriesData===null||CategoriesData===void 0?void 0:CategoriesData.map(function(group){return/*#__PURE__*/_jsx(\"option\",{value:group.groupName,children:group.groupName});})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mt-10\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-[#EF4722] hover:bg-orange-600 text-white font-bold py-2 px-4 rounded focus:outline-none\",children:\"Create\"})})]})]});}export default NewDiscussion;","map":{"version":3,"names":["React","useContext","useEffect","useState","CategoriesData","BASE_URL","useNavigate","AuthContext","axios","jsx","_jsx","jsxs","_jsxs","NewDiscussion","_useContext","currentUser","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","description","setDescription","_useState5","_useState6","category","setCategory","_useState7","_useState8","userId","setUserID","uid","createDiscussion","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","parentId","response","wrap","_callee$","_context","prev","next","post","concat","sent","window","location","reload","console","log","data","navigate","stop","apply","arguments","handleCreateDiscussion","_ref2","_callee2","e","_callee2$","_context2","preventDefault","error","abrupt","_x","className","children","onSubmit","htmlFor","type","id","name","value","onChange","target","placeholder","required","rows","disabled","selected","map","group","groupName"],"sources":["C:/Users/ILHAME/OneDrive/Documents/GitHub/tech_bible_react/src/components/Community/NewDiscussion.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { CategoriesData } from \"../../dataJson/CategoriesData\";\n// import axios from \"axios\";\nimport { BASE_URL } from \"../../config/mongo\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport axios from \"axios\";\nfunction NewDiscussion() {\n  const { currentUser } = useContext(AuthContext);\n\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [category, setCategory] = useState(\"Cybersecurity\");\n  const [userId, setUserID] = useState(\"\");\n  //const axios = require(\"axios\");\n\n  // async function checkMoralImplications(inputText) {\n  //   const apiKey = \"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\";\n  //   const apiUrl =\n  //     \"https://api.openai.com/v1/engines/davinci-codex/completions\";\n\n  //   try {\n  //     const response = await axios.post(\n  //       apiUrl,\n  //       {\n  //         prompt: `Is the following text morally acceptable? \"${inputText}\"`,\n  //         max_tokens: 1,\n  //       },\n  //       {\n  //         headers: {\n  //           Authorization: `Bearer ${apiKey}`,\n  //           \"Content-Type\": \"application/json\",\n  //         },\n  //       }\n  //     );\n\n  //     const completion = response.data.choices[0].text.trim();\n  //     return completion === \"Yes\";\n  //   } catch (error) {\n  //     console.error(\"Error:\", error);\n  //     return null;\n  //   }\n  // }\n\n  useEffect(() => {\n    setUserID(currentUser?.uid);\n  }, [currentUser]);\n  const createDiscussion = async () => {\n    const parentId = null;\n    const response = await axios.post(`${BASE_URL}/create-discussion`, {\n      userId,\n      title,\n      description,\n      category,\n      parentId,\n    });\n    window.location.reload();\n    // Handle successful response\n    console.log(\"Discussion Created successfully:\", response.data);\n    navigate(\"/community\");\n  };\n  const navigate = useNavigate();\n  const handleCreateDiscussion = async (e) => {\n    e.preventDefault();\n\n    if (!title || !description || !category || !userId) {\n      console.error(\"Missing required fields\");\n      console.log(title, description, category, userId);\n      return;\n    }\n\n    try {\n      console.log(title, description, category, userId);\n\n      // const inputText = { description };\n      // checkMoralImplications(inputText).then((result) => {\n      //   if (result === null) {\n      //     alert(\"The result is null.\");\n      //   } else if (result) {\n      //     console.log(\"The text is morally acceptable.\");\n      createDiscussion();\n      //   } else {\n      //     alert(\"The text is morally unacceptable.\");\n      //   }\n      // });\n\n      // You can perform additional actions here, such as displaying a success message or redirecting to another page\n    } catch (error) {\n      // Handle error\n      console.error(\"Error creating discussion:\", error);\n    }\n  };\n\n  return (\n    <div className=\"w-full px-[10%] py-[5%] bg-[#1C1C1C] rounded shadow-md w-[90%] mt-4 \">\n      <h2 className=\"text-2xl font-semibold text-white text-center mb-4\">\n        Create New Discussion\n      </h2>\n      <form onSubmit={handleCreateDiscussion}>\n        <div className=\"mb-4\">\n          <label\n            htmlFor=\"title\"\n            className=\"block text-gray-300 text-sm font-bold mb-2\"\n          >\n            Title\n          </label>\n          <input\n            type=\"text\"\n            id=\"title\"\n            name=\"Title\"\n            className=\"w-full px-3 py-2 border rounded bg-white text-black focus:outline-none focus:border-blue-500\"\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            placeholder=\"Write a title\"\n            required\n          />\n        </div>\n        <div className=\"mb-4\">\n          <label\n            htmlFor=\"description\"\n            className=\"block text-gray-300 text-sm font-bold mb-2\"\n          >\n            Description\n          </label>\n          <textarea\n            id=\"description\"\n            name=\"Description\"\n            rows=\"3\"\n            className=\"w-full px-3 py-2 border rounded bg-white text-black focus:outline-none focus:border-blue-500\"\n            placeholder=\"Write a Description...\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            required\n          ></textarea>\n        </div>\n        <div className=\"mb-4\">\n          <label\n            htmlFor=\"Category\"\n            className=\"block text-gray-300 text-sm font-bold mb-2\"\n          >\n            Category\n          </label>\n          <select\n            className=\"bg-white text-black rounded-md\"\n            name=\"Category\"\n            value={category}\n            onChange={(e) => setCategory(e.target.value)}\n          >\n            <option disabled selected>\n              - Select a Category -\n            </option>\n            {CategoriesData?.map((group) => (\n              <option value={group.groupName}>{group.groupName}</option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"flex justify-center mt-10\">\n          <button\n            type=\"submit\"\n            className=\"bg-[#EF4722] hover:bg-orange-600 text-white font-bold py-2 px-4 rounded focus:outline-none\"\n          >\n            Create\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default NewDiscussion;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}