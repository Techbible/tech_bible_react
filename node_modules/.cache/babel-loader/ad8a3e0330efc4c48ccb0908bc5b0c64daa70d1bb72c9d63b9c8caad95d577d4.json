{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ILHAME/OneDrive/Documents/GitHub/tech_bible_react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ILHAME/OneDrive/Documents/GitHub/tech_bible_react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import NewsItem from\"./NewsItem\";import{Link,useParams}from\"react-router-dom\";import{useContext}from\"react\";import{BASE_URL}from\"../../config/mongo\";import{NewsContext}from\"../../context/NewsContext\";import{AuthContext}from\"../../context/AuthContext\";// import loader from \"/assets/loader.gif\"\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NewsList=function NewsList(){var _useContext=useContext(NewsContext),DataAPI=_useContext.DataAPI,MongoDBData=_useContext.MongoDBData;var _useContext2=useContext(AuthContext),isAdmin=_useContext2.isAdmin;var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!window.confirm(\"Are you sure that you want to delete this item?\")){_context.next=12;break;}_context.prev=1;_context.next=4;return axios.delete(\"\".concat(BASE_URL,\"/delete-article/\").concat(id));case 4:response=_context.sent;console.log(\"Article deleted:\",response.data);document.location.reload();// Handle successful deletion, such as updating the UI or showing a success message\n_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.error(\"Error deleting article:\",_context.t0);// Handle error, such as displaying an error message or performing necessary error handling\ncase 12:case\"end\":return _context.stop();}},_callee,null,[[1,9]]);}));return function handleDelete(_x){return _ref.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"\".concat(BASE_URL,\"/news\"));case 3:response=_context2.sent;console.log(response.data);// return response.data;\n_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);return _context2.abrupt(\"return\",[]);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}))();},[MongoDBData]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto bg-[#0D0C12] text-white my-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"News-title text-center py-8\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold\",children:\"Daily AI News\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto w-full my-5 text-center\",children:isAdmin?/*#__PURE__*/_jsx(Link,{to:\"/AddNewsArticle\",children:/*#__PURE__*/_jsx(\"span\",{className:\"bg-dark p-5\",children:\"+ Add an Article\"})}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap justify-center\",children:(DataAPI===null||DataAPI===void 0?void 0:DataAPI.length)>0?DataAPI===null||DataAPI===void 0?void 0:DataAPI.map(function(article,index){var _article$image,_article$image$thumbn;return/*#__PURE__*/_jsx(\"div\",{className:\"w-full my-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"lg:ml-[15%] rounded-lg shadow-lg overflow-hidden\",children:/*#__PURE__*/_jsx(NewsItem,{title:article.name,description:article.description,url:article.url,urlToImage:(_article$image=article.image)===null||_article$image===void 0?void 0:(_article$image$thumbn=_article$image.thumbnail)===null||_article$image$thumbn===void 0?void 0:_article$image$thumbn.contentUrl})})},index);}):MongoDBData===null||MongoDBData===void 0?void 0:MongoDBData.map(function(article,index){var _article$image2;return/*#__PURE__*/_jsx(\"div\",{className:\"w-full my-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"lg:ml-[15%] rounded-lg shadow-lg overflow-hidden\",children:[isAdmin?/*#__PURE__*/_jsx(\"div\",{className:\"m-25 mr-3\",onClick:function onClick(){return handleDelete(article._id);},children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.PUBLIC_URL,\"/assets/bin.png\"),alt:\"delete\",className:\"cursor-pointer w-[32px] h-[32px] m-2\"})}):/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(NewsItem,{_id:article._id,title:article.name,description:article.description,url:article.url,urlToImage:article===null||article===void 0?void 0:(_article$image2=article.image)===null||_article$image2===void 0?void 0:_article$image2.contentUrl})]})},index);})}),!DataAPI&&!MongoDBData&&/*#__PURE__*/_jsx(\"div\",{className:\"loader-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loader-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loader\"})})})]});};export default NewsList;","map":{"version":3,"names":["React","useState","useEffect","axios","NewsItem","Link","useParams","useContext","BASE_URL","NewsContext","AuthContext","jsx","_jsx","jsxs","_jsxs","NewsList","_useContext","DataAPI","MongoDBData","_useContext2","isAdmin","handleDelete","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","response","wrap","_callee$","_context","prev","next","window","confirm","delete","concat","sent","console","log","data","document","location","reload","t0","error","stop","_x","apply","arguments","_callee2","_callee2$","_context2","get","abrupt","className","children","to","length","map","article","index","_article$image","_article$image$thumbn","title","name","description","url","urlToImage","image","thumbnail","contentUrl","_article$image2","onClick","_id","src","process","env","PUBLIC_URL","alt"],"sources":["C:/Users/ILHAME/OneDrive/Documents/GitHub/tech_bible_react/src/components/News Scraper/NewsList.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport NewsItem from \"./NewsItem\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport { useContext } from \"react\";\r\nimport { BASE_URL } from \"../../config/mongo\";\r\nimport { NewsContext } from \"../../context/NewsContext\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n// import loader from \"/assets/loader.gif\"\r\nconst NewsList = () => {\r\n  const { DataAPI, MongoDBData } = useContext(NewsContext);\r\n  const { isAdmin } = useContext(AuthContext);\r\n  \r\n\r\n  \r\n  const handleDelete = async (id) => {\r\n    if (window.confirm(\"Are you sure that you want to delete this item?\")) {\r\n\r\n    try {\r\n      const response = await axios.delete(`${BASE_URL}/delete-article/${id}`);\r\n      console.log(\"Article deleted:\", response.data);\r\n      document.location.reload();\r\n\r\n      // Handle successful deletion, such as updating the UI or showing a success message\r\n    } catch (error) {\r\n      console.error(\"Error deleting article:\", error);\r\n      // Handle error, such as displaying an error message or performing necessary error handling\r\n    }\r\n  }\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const response = await axios.get(`${BASE_URL}/news`);\r\n        console.log(response.data);\r\n        // return response.data;\r\n      } catch (error) {\r\n        console.error(error);\r\n        return [];\r\n      }\r\n    })();\r\n  }, [MongoDBData]);\r\n  return (\r\n    <div className=\"container mx-auto bg-[#0D0C12] text-white my-3\">\r\n      <div className=\"News-title text-center py-8\">\r\n        <h1 className=\"text-4xl font-bold\">Daily AI News</h1>\r\n      </div>\r\n      <div className=\"mx-auto w-full my-5 text-center\">\r\n        {isAdmin ? (\r\n          <Link to=\"/AddNewsArticle\">\r\n            <span className=\"bg-dark p-5\">+ Add an Article</span>\r\n          </Link>\r\n        ) : (\r\n          <div></div>\r\n        )}\r\n      </div>\r\n      <div className=\"flex flex-wrap justify-center\">\r\n        {DataAPI?.length > 0\r\n          ? DataAPI?.map((article, index) => (\r\n              <div className=\"w-full my-5\" key={index}>\r\n                <div className=\"lg:ml-[15%] rounded-lg shadow-lg overflow-hidden\">\r\n                  <NewsItem\r\n                    title={article.name}\r\n                    description={article.description}\r\n                    url={article.url}\r\n                    urlToImage={article.image?.thumbnail?.contentUrl}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ))\r\n          : MongoDBData?.map((article, index) => (\r\n              <div className=\"w-full my-5\" key={index}>\r\n                <div className=\"lg:ml-[15%] rounded-lg shadow-lg overflow-hidden\">\r\n                {isAdmin?\r\n                  <div\r\n                    className=\"m-25 mr-3\"\r\n                    onClick={() => handleDelete(article._id)}\r\n                  >\r\n                    <img\r\n                      src={`${process.env.PUBLIC_URL}/assets/bin.png`}\r\n                      alt=\"delete\"\r\n                      className=\"cursor-pointer w-[32px] h-[32px] m-2\"\r\n                    />\r\n                  </div>\r\n                :<div></div>}  \r\n   \r\n                  \r\n                  <NewsItem\r\n                    _id={article._id}\r\n                    title={article.name}\r\n                    description={article.description}\r\n                    url={article.url}\r\n                    urlToImage={article?.image?.contentUrl}\r\n                  />\r\n       \r\n                </div>\r\n              </div>\r\n            ))}\r\n      </div>\r\n      {!DataAPI && !MongoDBData && (\r\n        <div className=\"loader-wrapper\">\r\n          <div className=\"loader-container\">\r\n            <div className=\"loader\"></div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default NewsList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}