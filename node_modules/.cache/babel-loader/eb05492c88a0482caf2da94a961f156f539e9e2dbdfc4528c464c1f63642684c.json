{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ILHAME/OneDrive/Documents/GitHub/tech_bible_react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ILHAME/OneDrive/Documents/GitHub/tech_bible_react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useReducer,forwardRef,useImperativeHandle}from\"react\";import{db}from\"../config/firebase\";import\"react-toastify/dist/ReactToastify.css\";import{doc,arrayUnion,updateDoc,arrayRemove}from\"firebase/firestore\";import{useContext}from\"react\";import\"../assets/styles/home/home.css\";import{AuthContext}from\"../context/AuthContext\";//mongo\nimport axios from\"axios\";import{BASE_URL}from\"../config/mongo\";import{jsx as _jsx}from\"react/jsx-runtime\";var LikeMethods=/*#__PURE__*/forwardRef(function(props,ref){var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;//handling the likes/follow logic\n// const handleLikes = async (ToolId) => {\n//   try {\n//     const ToolRef = doc(db, \"Tools\", ToolId);\n//     await updateDoc(ToolRef, {\n//       LikedBy: arrayUnion(currentUser?.uid),\n//     });\n//   } catch (error) {\n//     console.log(error);\n//   }\n// };\n//this is mongo\nvar handleLikes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(ToolId){var _response$data,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(BASE_URL,\"/like/\").concat(ToolId,\"/\").concat(currentUser===null||currentUser===void 0?void 0:currentUser.uid));case 3:response=_context.sent;console.log(response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.Name);// The message \"tool has been liked successfully!!!!!\"\nconsole.log(\"tool has been liked successfully!!!!!\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function handleLikes(_x){return _ref.apply(this,arguments);};}();var handleUnLike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(ToolId){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(BASE_URL,\"/unlike/\").concat(ToolId,\"/\").concat(currentUser===null||currentUser===void 0?void 0:currentUser.uid));case 3:response=_context2.sent;console.log(response.data);// The message \"tool has been unliked successfully!!!!!\"\nconsole.log(\"tool has been unliked successfully!!!!!\");_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return function handleUnLike(_x2){return _ref2.apply(this,arguments);};}();//handling unfollow logic\n// const handleUnLike = async (ToolId) => {\n//   try {\n//     const ToolRef = doc(db, \"Tools\", ToolId);\n//     await updateDoc(ToolRef, {\n//       LikedBy: arrayRemove(currentUser?.uid),\n//     });\n//   } catch (error) {\n//     console.log(error);\n//   }\n// };\n/********************************Malking the methods exportable START***************************** */ // create our ref object\nvar publicRef={// Referencing our methods\nLike:handleLikes,Unlike:handleUnLike};// pass the ref and a function that returns our object\nuseImperativeHandle(ref,function(){return publicRef;});/********************************Malking the methods exportable END******************************* */return/*#__PURE__*/_jsx(\"div\",{});});export default LikeMethods;","map":{"version":3,"names":["React","useReducer","forwardRef","useImperativeHandle","db","doc","arrayUnion","updateDoc","arrayRemove","useContext","AuthContext","axios","BASE_URL","jsx","_jsx","LikeMethods","props","ref","_useContext","currentUser","handleLikes","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","ToolId","_response$data","response","wrap","_callee$","_context","prev","next","post","concat","uid","sent","console","log","data","Name","t0","stop","_x","apply","arguments","handleUnLike","_ref2","_callee2","_callee2$","_context2","_x2","publicRef","Like","Unlike"],"sources":["C:/Users/ILHAME/OneDrive/Documents/GitHub/tech_bible_react/src/lib/LikeMethods.js"],"sourcesContent":["import React, { useReducer, forwardRef, useImperativeHandle } from \"react\";\r\nimport { db } from \"../config/firebase\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { doc, arrayUnion, updateDoc, arrayRemove } from \"firebase/firestore\";\r\n\r\nimport { useContext } from \"react\";\r\nimport \"../assets/styles/home/home.css\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n//mongo\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../config/mongo\";\r\n\r\nconst LikeMethods = forwardRef((props, ref) => {\r\n  const { currentUser } = useContext(AuthContext);\r\n\r\n  //handling the likes/follow logic\r\n  // const handleLikes = async (ToolId) => {\r\n  //   try {\r\n  //     const ToolRef = doc(db, \"Tools\", ToolId);\r\n  //     await updateDoc(ToolRef, {\r\n  //       LikedBy: arrayUnion(currentUser?.uid),\r\n  //     });\r\n  //   } catch (error) {\r\n  //     console.log(error);\r\n  //   }\r\n  // };\r\n\r\n  //this is mongo\r\n  const handleLikes = async (ToolId) => {\r\n    try {\r\n      const response = await axios.post(\r\n        `${BASE_URL}/like/${ToolId}/${currentUser?.uid}`\r\n      );\r\n      console.log(response?.data?.Name); // The message \"tool has been liked successfully!!!!!\"\r\n      console.log(\"tool has been liked successfully!!!!!\");\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleUnLike = async (ToolId) => {\r\n    try {\r\n      const response = await axios.post(\r\n        `${BASE_URL}/unlike/${ToolId}/${currentUser?.uid}`\r\n      );\r\n      console.log(response.data); // The message \"tool has been unliked successfully!!!!!\"\r\n      console.log(\"tool has been unliked successfully!!!!!\");\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  //handling unfollow logic\r\n  // const handleUnLike = async (ToolId) => {\r\n  //   try {\r\n  //     const ToolRef = doc(db, \"Tools\", ToolId);\r\n  //     await updateDoc(ToolRef, {\r\n  //       LikedBy: arrayRemove(currentUser?.uid),\r\n  //     });\r\n  //   } catch (error) {\r\n  //     console.log(error);\r\n  //   }\r\n  // };\r\n  /********************************Malking the methods exportable START***************************** */\r\n  // create our ref object\r\n  const publicRef = {\r\n    // Referencing our methods\r\n    Like: handleLikes,\r\n    Unlike: handleUnLike,\r\n  };\r\n\r\n  // pass the ref and a function that returns our object\r\n  useImperativeHandle(ref, () => publicRef);\r\n\r\n  /********************************Malking the methods exportable END******************************* */\r\n  return <div></div>;\r\n});\r\n\r\nexport default LikeMethods;\r\n"],"mappings":"gTAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,CAAEC,UAAU,CAAEC,mBAAmB,KAAQ,OAAO,CAC1E,OAASC,EAAE,KAAQ,oBAAoB,CACvC,MAAO,uCAAuC,CAC9C,OAASC,GAAG,CAAEC,UAAU,CAAEC,SAAS,CAAEC,WAAW,KAAQ,oBAAoB,CAE5E,OAASC,UAAU,KAAQ,OAAO,CAClC,MAAO,gCAAgC,CACvC,OAASC,WAAW,KAAQ,wBAAwB,CACpD;AACA,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE3C,GAAM,CAAAC,WAAW,cAAGb,UAAU,CAAC,SAACc,KAAK,CAAEC,GAAG,CAAK,CAC7C,IAAAC,WAAA,CAAwBT,UAAU,CAACC,WAAW,CAAC,CAAvCS,WAAW,CAAAD,WAAA,CAAXC,WAAW,CAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,GAAM,CAAAC,WAAW,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,MAAM,MAAAC,cAAA,CAAAC,QAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEN,CAAAtB,KAAK,CAACuB,IAAI,IAAAC,MAAA,CAC5BvB,QAAQ,WAAAuB,MAAA,CAAST,MAAM,MAAAS,MAAA,CAAIhB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEiB,GAAG,EAC/C,QAFKR,QAAQ,CAAAG,QAAA,CAAAM,IAAA,CAGdC,OAAO,CAACC,GAAG,CAACX,QAAQ,SAARA,QAAQ,kBAAAD,cAAA,CAARC,QAAQ,CAAEY,IAAI,UAAAb,cAAA,iBAAdA,cAAA,CAAgBc,IAAI,CAAC,CAAE;AACnCH,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC,CAACR,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAW,EAAA,CAAAX,QAAA,aAErDO,OAAO,CAACC,GAAG,CAAAR,QAAA,CAAAW,EAAA,CAAO,CAAC,yBAAAX,QAAA,CAAAY,IAAA,MAAAlB,OAAA,gBAEtB,kBAVK,CAAAL,WAAWA,CAAAwB,EAAA,SAAAvB,IAAA,CAAAwB,KAAA,MAAAC,SAAA,OAUhB,CAED,GAAM,CAAAC,YAAY,6BAAAC,KAAA,CAAA1B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAyB,SAAOvB,MAAM,MAAAE,QAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAqB,UAAAC,SAAA,iBAAAA,SAAA,CAAAnB,IAAA,CAAAmB,SAAA,CAAAlB,IAAA,SAAAkB,SAAA,CAAAnB,IAAA,GAAAmB,SAAA,CAAAlB,IAAA,SAEP,CAAAtB,KAAK,CAACuB,IAAI,IAAAC,MAAA,CAC5BvB,QAAQ,aAAAuB,MAAA,CAAWT,MAAM,MAAAS,MAAA,CAAIhB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEiB,GAAG,EACjD,QAFKR,QAAQ,CAAAuB,SAAA,CAAAd,IAAA,CAGdC,OAAO,CAACC,GAAG,CAACX,QAAQ,CAACY,IAAI,CAAC,CAAE;AAC5BF,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC,CAACY,SAAA,CAAAlB,IAAA,iBAAAkB,SAAA,CAAAnB,IAAA,GAAAmB,SAAA,CAAAT,EAAA,CAAAS,SAAA,aAEvDb,OAAO,CAACC,GAAG,CAAAY,SAAA,CAAAT,EAAA,CAAO,CAAC,yBAAAS,SAAA,CAAAR,IAAA,MAAAM,QAAA,gBAEtB,kBAVK,CAAAF,YAAYA,CAAAK,GAAA,SAAAJ,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAUjB,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGACA;AACA,GAAM,CAAAO,SAAS,CAAG,CAChB;AACAC,IAAI,CAAElC,WAAW,CACjBmC,MAAM,CAAER,YACV,CAAC,CAED;AACA5C,mBAAmB,CAACc,GAAG,CAAE,iBAAM,CAAAoC,SAAS,GAAC,CAEzC,qGACA,mBAAOvC,IAAA,UAAW,CACpB,CAAC,CAAC,CAEF,cAAe,CAAAC,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}